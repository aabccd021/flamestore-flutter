{
  "$schema": "https://raw.githubusercontent.com/aabccd021/flamestore/master/flamestore-schema/v2.json",
  "configuration": {
    "region": "asia-southeast2",
    "project": {
      "flamestore": {
        "dynamicLinkDomain": "flamestore.page.link",
        "androidPackageName": "com.example.flamestore_example"
      }
    }
  },
  "collections": {
    "users": {
      "rules": {
        "get": "all",
        "list": "authenticated",
        "create": "owner",
        "update": "owner"
      },
      "fields": {
        "uid": {
          "type": {
            "string": {
              "isKey": true,
              "isOwnerUid": true
            }
          }
        },
        "userName": {
          "property": {
            "isUnique": true
          },
          "type": {
            "string": {
              "minLength": 1,
              "maxLength": 15
            }
          }
        },
        "bio": {
          "property": {
            "isOptional": true
          },
          "type": {
            "string": {
              "minLength": 1,
              "maxLength": 160
            }
          }
        },
        "tweetsCount": {
          "type": {
            "count": {
              "collection": "tweets",
              "reference": "user"
            }
          }
        }
      }
    },
    "tweets": {
      "rules": {
        "get": "all",
        "list": "all",
        "create": "owner",
        "update": "owner",
        "delete": "owner"
      },
      "fields": {
        "user": {
          "type": {
            "path": {
              "collection": "users",
              "isOwnerDocRef": true
            }
          }
        },
        "userName": {
          "type": {
            "syncFrom": {
              "field": "userName",
              "reference": "user"
            }
          }
        },
        "tweetText": {
          "type": {
            "string": {
              "minLength": 1,
              "maxLength": 280
            }
          }
        },
        "likesSum": {
          "type": {
            "sum": {
              "collection": "likes",
              "field": "likeValue",
              "reference": "tweet"
            }
          }
        },
        "creationTime": {
          "type": {
            "timestamp": {
              "isServerTimestamp": true
            }
          }
        },
        "hotness": {
          "property": {
            "isComputed": true
          },
          "type": {
            "float": {}
          }
        },
        "dynamicLink": {
          "type": {
            "dynamicLink": {
              "title": {
                "field": "tweetText"
              },
              "description": "tweet description"
            }
          }
        }
      }
    },
    "likes": {
      "rules": {
        "get": "owner",
        "create": "owner",
        "update": "owner",
        "delete": "owner"
      },
      "fields": {
        "likeValue": {
          "type": {
            "int": {
              "max": 5,
              "min": 0,
              "deleteDocWhen": 0
            }
          }
        },
        "user": {
          "type": {
            "path": {
              "isKey": true,
              "collection": "users",
              "isOwnerDocRef": true
            }
          }
        },
        "tweet": {
          "type": {
            "path": {
              "isKey": true,
              "collection": "tweets"
            }
          }
        }
      }
    }
  }
}